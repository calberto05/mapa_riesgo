{% extends "dashboard.html" %}

{% block content %}
<h1 class="index-title">Dashboard</h1>


<div class="graficas">
    <div class = "" id="grafica5">
        <div class="cards">
            <div class="card total-reports">
                <div class="card-icon">üìä</div>
                <div class="card-content">
                    <h3>Total Reports</h3>
                    <p class="card-number" id="totalReportsCount">999</p>
                </div>
            </div>
            
            <div class="card resolved-reports">
                <div class="card-icon">‚úÖ</div>
                <div class="card-content">
                    <h3>Total Alcaldias</h3>
                    <p class="card-number" id="resolvedReportsCount">19</p>
                </div>
            </div>
            
        </div>
        <div class="cards">
            <div class="card pending-reports">
                <div class="card-icon">‚è≥</div>
                <div class="card-content">
                    <h3>Dias capturados</h3>
                    <p class="card-number" id="pendingReportsCount">4</p>
                </div>
            </div>
            
            <div class="card report-priority">
                <div class="card-content">
                    <h3>Total de colonias</h3>
                    <p class="card-number" id="highPriorityCount">363</p>
                </div>
            </div>
        </div>
    </div>
    <div class = "grafica" id="grafica" ></div>
    <div class = "grafica graficaGrande" id="grafica4"></div>
    <div class = "grafica" id="grafica2"></div>
    <div class = "grafica" id="grafica3"></div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // grafica 1 de pie
    var trace1 = {
    values: [525, 428, 25, 10, 5, 2, 1, 1, 1, 1],
    labels: ['Fuga', 'Falta de agua', 'Drenaje Obstruido', 'Brote en aguas negras',
   'Mal uso', 'Mala calidad', 'Falta de tapa en valvula', 'Hundimiento',
   'Coladera sin tapa', 'Rejilla de piso'],
    type: 'pie',
    marker: {
        colors: [
            '#FF6384',  // Vibrant Pink
            '#36A2EB',  // Bright Blue
            '#FFCE56',  // Sunny Yellow
            '#4BC0C0',  // Teal
            '#9966FF',  // Purple
            '#FF9F40',  // Orange
            '#FF6384',  // Pink (repeat)
            '#C9CBE0',  // Light Lavender
            '#A8E0A8',  // Soft Green
            '#E7E9ED'   // Light Gray
        ]
    }
};


    var layout1 = {
    title: 'Reportes por tipo',
    // Optional: Add more styling to the layout
    titlefont: {
        size: 18,
        color: '#2c3e50'
    },
    paper_bgcolor: 'rgba(0,0,0,0)',  // Transparent background
    plot_bgcolor: 'rgba(0,0,0,0)',   // Transparent background
    // Optional: Add hover mode
    hoverlabel: {
        bgcolor: '#f8f9fa',
        font: {
            color: '#2c3e50'
        }
    }
};

    var data = [trace1];   

    var trace2 = {
        values: [186, 177, 115, 112,  75,  67,  58,  36,  33,  30, 27,  26,  25,  14,  14,   1,   1,   1,
        1],
        labels:['Alvaro Obregon', 'Benito Juarez', 'Tlalpan', 'Gustavo A. Madero',
       'Coyoacan', 'Cuauhtemoc', 'Iztapalapa', 'Miguel Hidalgo',
       'Venustiano Carranza', 'Azcapotzalco', 'Xochimilco', 'Iztacalco',
       'Tlahuac', 'La Magdalena Contreras', 'Cuajimalpa de Morelos',
       'Tlalnepantla de Baz', 'Milpa Alta', 'NezahualcÔøΩÔøΩ',
       'Ecatepec de Morelos'],
        type: 'pie',
        marker: {
        colors: [
            '#FF6384',  // Vibrant Pink
            '#36A2EB',  // Bright Blue
            '#FFCE56',  // Sunny Yellow
            '#4BC0C0',  // Teal
            '#9966FF',  // Purple
            '#FF9F40',  // Orange
            '#FF6384',  // Pink (repeat)
            '#C9CBE0',  // Light Lavender
            '#A8E0A8',  // Soft Green
            '#E7E9ED'   // Light Gray
        ]
    }
    };

    var layout2 = {
        title: 'Reportes por alcaldia',
            // Optional: Add more styling to the layout
    titlefont: {
        size: 18,
        color: '#2c3e50'
    },
    paper_bgcolor: 'rgba(0,0,0,0)',  // Transparent background
    plot_bgcolor: 'rgba(0,0,0,0)',   // Transparent background
    // Optional: Add hover mode
    hoverlabel: {
        bgcolor: '#f8f9fa',
        font: {
            color: '#2c3e50'
        }
    }
    };

    var data2 = [trace2]; 
    
    // bar plot
    var trace3 = {
    x: [3, 4, 2, 1],
    y: [476, 207, 181, 135],
    type: 'bar',
    marker: {
        color: [
            '#3498db',  // Blue for the highest value
            '#2ecc71',  // Green for the second highest
            '#e74c3c',  // Red for the third
            '#f39c12'   // Orange for the lowest
        ],
        opacity: 0.8  // Slight transparency
    },
    // Add hover text to provide more context
    text: ['476 Reportes', '207 Reportes', '181 Reportes', '135 Reportes'],
    hoverinfo: 'text',
    hovertemplate: '%{text}<extra></extra>'
};

var layout3 = {
    title: {
        text: 'Reportes por los dias capturados',
        font: {
            size: 18,
            color: '#2c3e50'
        }
    },
    xaxis: {
        title: {
            text: 'Dia',
            font: {
                size: 14,
                color: '#34495e'
            }
        },
        tickvals: [3, 4, 2, 1],  // Ensuring correct order
        ticktext: ['D√≠a 3', 'D√≠a 4', 'D√≠a 2', 'D√≠a 1'],  // More descriptive labels
        tickfont: {
            size: 12,
            color: '#7f8c8d'
        }
    },
    yaxis: {
        title: {
            text: 'Reportes',
            font: {
                size: 14,
                color: '#34495e'
            }
        },
        tickfont: {
            size: 12,
            color: '#7f8c8d'
        }
    },
    // Additional layout improvements
    plot_bgcolor: 'rgba(0,0,0,0)',  // Transparent background
    paper_bgcolor: 'rgba(0,0,0,0)', // Transparent background
    bargap: 0.3,  // Space between bars
    
    // Add grid for better readability
    xaxis: {
        showgrid: false
    },
    yaxis: {
        showgrid: true,
        gridcolor: 'rgba(0,0,0,0.1)'
    }
};

var config = {
    responsive: true,
    displayModeBar: false  // Hide the plotly toolbar
};

Plotly.newPlot('grafica3', [trace3], layout3, config);

    var data3 = [trace3];   

    var trace4 = {
        y: [113, 109,94,93,85,76,68,62,57,57,42,42,35,20,18,11, 5, 5,
  4,   2,   1],
        x: [11, 10, 13, 14, 12, 16, 15, 9, 18, 17, 19, 8, 20, 21, 22, 23, 0, 7, 1,
        6, 5],
        type: 'bar',
        marker: {
    color: 'rgb(142,124,195)'
  }
    };

    var layout4 = {
        title: 'Reportes en cada hora del dia',
        xaxis: {
            title: 'Hora 24h',
            tickvals: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]
        },
        yaxis: {
            title: 'Reportes',            
        }
    };

    var data4 = [trace4];  
    
    var config = {responsive: true};

    // Renderiza la gr√°fica en el div con id "grafica"
    Plotly.newPlot('grafica', data, layout1, config);
    Plotly.newPlot('grafica2', data2, layout2, config);
    Plotly.newPlot('grafica3', data3, layout3, config);
    Plotly.newPlot('grafica4', data4, layout4, config);
</script>
{% endblock %}